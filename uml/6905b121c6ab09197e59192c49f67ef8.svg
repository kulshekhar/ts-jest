<?xml version="1.0" encoding="UTF-8" standalone="no"?><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentScriptType="application/ecmascript" contentStyleType="text/css" height="1142px" preserveAspectRatio="none" style="width:1037px;height:1142px;" version="1.1" viewBox="0 0 1037 1142" width="1037px" zoomAndPan="magnify"><defs><filter height="300%" id="f6fomzz8ejd0v" width="300%" x="-1" y="-1"><feGaussianBlur result="blurOut" stdDeviation="2.0"/><feColorMatrix in="blurOut" result="blurOut2" type="matrix" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 .4 0"/><feOffset dx="4.0" dy="4.0" in="blurOut2" result="blurOut3"/><feBlend in="SourceGraphic" in2="blurOut3" mode="normal"/></filter></defs><g><ellipse cx="517.75" cy="20" fill="#000000" filter="url(#f6fomzz8ejd0v)" rx="10" ry="10" style="stroke: none; stroke-width: 1.0;"/><path d="M591.75,46.7559 L591.75,63.0664 L571.75,67.0664 L591.75,71.0664 L591.75,87.377 A0,0 0 0 0 591.75,87.377 L797.75,87.377 A0,0 0 0 0 797.75,87.377 L797.75,56.7559 L787.75,46.7559 L591.75,46.7559 A0,0 0 0 0 591.75,46.7559 " fill="#FBFB77" filter="url(#f6fomzz8ejd0v)" style="stroke: #A80036; stroke-width: 1.0;"/><path d="M787.75,46.7559 L787.75,56.7559 L797.75,56.7559 L787.75,46.7559 " fill="#FBFB77" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="185" x="597.75" y="64.3242">It'll be different per test-case</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="147" x="597.75" y="79.6348">and per template basis.</text><rect fill="#FEFECE" filter="url(#f6fomzz8ejd0v)" height="34.1328" rx="12.5" ry="12.5" style="stroke: #A80036; stroke-width: 1.5;" width="108" x="463.75" y="50"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="88" x="473.75" y="71.6016">create work dir</text><path d="M200.25,178.752 L200.25,219.373 A0,0 0 0 0 200.25,219.373 L422.25,219.373 A0,0 0 0 0 422.25,219.373 L422.25,203.0625 L442.25,199.0625 L422.25,195.0625 L422.25,188.752 L412.25,178.752 L200.25,178.752 A0,0 0 0 0 200.25,178.752 " fill="#FBFB77" filter="url(#f6fomzz8ejd0v)" style="stroke: #A80036; stroke-width: 1.0;"/><path d="M412.25,178.752 L412.25,188.752 L422.25,188.752 L412.25,178.752 " fill="#FBFB77" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="182" x="206.25" y="196.3203">avoid re-running npm install</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="201" x="206.25" y="211.6309">for each test case and template;</text><rect fill="#FEFECE" filter="url(#f6fomzz8ejd0v)" height="34.1328" rx="12.5" ry="12.5" style="stroke: #A80036; stroke-width: 1.5;" width="151" x="442.25" y="181.9961"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="131" x="452.25" y="203.5977">symlink node_modules</text><polygon fill="#FEFECE" filter="url(#f6fomzz8ejd0v)" points="451.25,130.2744,584.25,130.2744,596.25,142.2744,584.25,154.2744,451.25,154.2744,439.25,142.2744,451.25,130.2744" style="stroke: #A80036; stroke-width: 1.5;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="18" x="521.75" y="164.9092">yes</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="133" x="451.25" y="146.4316">has a node_modules dir?</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="14" x="596.25" y="139.9541">no</text><polygon fill="#FEFECE" filter="url(#f6fomzz8ejd0v)" points="517.75,239.373,529.75,251.373,517.75,263.373,505.75,251.373,517.75,239.373" style="stroke: #A80036; stroke-width: 1.5;"/><path d="M617.75,273.373 L617.75,304.9941 L597.75,308.9941 L617.75,312.9941 L617.75,344.6152 A0,0 0 0 0 617.75,344.6152 L819.75,344.6152 A0,0 0 0 0 819.75,344.6152 L819.75,283.373 L809.75,273.373 L617.75,273.373 A0,0 0 0 0 617.75,273.373 " fill="#FBFB77" filter="url(#f6fomzz8ejd0v)" style="stroke: #A80036; stroke-width: 1.0;"/><path d="M809.75,273.373 L809.75,283.373 L819.75,283.373 L809.75,273.373 " fill="#FBFB77" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="165" x="623.75" y="290.9414">all files in template dir are</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="175" x="623.75" y="306.252">copied to test case work dir</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="181" x="623.75" y="321.5625">except `node_modules` and</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="134" x="623.75" y="336.873">`package-lock.json`</text><rect fill="#FEFECE" filter="url(#f6fomzz8ejd0v)" height="34.1328" rx="12.5" ry="12.5" style="stroke: #A80036; stroke-width: 1.5;" width="160" x="437.75" y="291.9277"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="140" x="447.75" y="313.5293">copy files from template</text><polygon fill="#FEFECE" filter="url(#f6fomzz8ejd0v)" points="306.5,408.6152,386.5,408.6152,398.5,420.6152,386.5,432.6152,306.5,432.6152,294.5,420.6152,306.5,408.6152" style="stroke: #A80036; stroke-width: 1.5;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="18" x="350.5" y="443.25">yes</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="80" x="306.5" y="424.7725">is snapshot dir</text><path d="M36,464.75 L36,535.9922 A0,0 0 0 0 36,535.9922 L285,535.9922 A0,0 0 0 0 285,535.9922 L285,504.3711 L305,500.3711 L285,496.3711 L285,474.75 L275,464.75 L36,464.75 A0,0 0 0 0 36,464.75 " fill="#FBFB77" filter="url(#f6fomzz8ejd0v)" style="stroke: #A80036; stroke-width: 1.0;"/><path d="M275,464.75 L275,474.75 L285,474.75 L275,464.75 " fill="#FBFB77" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="228" x="42" y="482.3184">snapshots directories are symlinked</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="188" x="42" y="497.6289">to test case source dir so that</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="221" x="42" y="512.9395">updating them would update in the</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="83" x="42" y="528.25">source folder</text><rect fill="#FEFECE" filter="url(#f6fomzz8ejd0v)" height="34.1328" rx="12.5" ry="12.5" style="stroke: #A80036; stroke-width: 1.5;" width="83" x="305" y="483.3047"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="63" x="315" y="504.9063">symlink dir</text><polygon fill="#FEFECE" filter="url(#f6fomzz8ejd0v)" points="569.5,408.6152,649.5,408.6152,661.5,420.6152,649.5,432.6152,569.5,432.6152,557.5,420.6152,569.5,408.6152" style="stroke: #A80036; stroke-width: 1.5;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="18" x="613.5" y="443.25">yes</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="80" x="569.5" y="424.7725">is jest.config.js</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="35" x="661.5" y="418.2949">others</text><path d="M428.5,513.2275 L428.5,553.8486 A0,0 0 0 0 428.5,553.8486 L512.5,553.8486 A0,0 0 0 0 512.5,553.8486 L512.5,537.5381 L532.5,533.5381 L512.5,529.5381 L512.5,523.2275 L502.5,513.2275 L428.5,513.2275 A0,0 0 0 0 428.5,513.2275 " fill="#FBFB77" filter="url(#f6fomzz8ejd0v)" style="stroke: #A80036; stroke-width: 1.0;"/><path d="M502.5,513.2275 L502.5,523.2275 L512.5,523.2275 L502.5,513.2275 " fill="#FBFB77" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="62" x="434.5" y="530.7959">allows for</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="63" x="434.5" y="546.1064">extending</text><rect fill="#FEFECE" filter="url(#f6fomzz8ejd0v)" height="34.1328" rx="12.5" ry="12.5" style="stroke: #A80036; stroke-width: 1.5;" width="154" x="532.5" y="516.4717"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="134" x="542.5" y="538.0732">call with parent content</text><polygon fill="#FEFECE" filter="url(#f6fomzz8ejd0v)" points="543,464.75,676,464.75,688,476.75,676,488.75,543,488.75,531,476.75,543,464.75" style="stroke: #A80036; stroke-width: 1.5;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="18" x="613.5" y="499.3848">yes</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="133" x="543" y="480.9072">jest.config.js is function?</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="14" x="688" y="474.4297">no</text><polygon fill="#FEFECE" filter="url(#f6fomzz8ejd0v)" points="609.5,578.3262,621.5,590.3262,609.5,602.3262,597.5,590.3262,609.5,578.3262" style="stroke: #A80036; stroke-width: 1.5;"/><path d="M795.5,494.4395 L795.5,526.0605 L775.5,530.0605 L795.5,534.0605 L795.5,565.6816 A0,0 0 0 0 795.5,565.6816 L999.5,565.6816 A0,0 0 0 0 999.5,565.6816 L999.5,504.4395 L989.5,494.4395 L795.5,494.4395 A0,0 0 0 0 795.5,494.4395 " fill="#FBFB77" filter="url(#f6fomzz8ejd0v)" style="stroke: #A80036; stroke-width: 1.0;"/><path d="M989.5,494.4395 L989.5,504.4395 L999.5,504.4395 L989.5,494.4395 " fill="#FBFB77" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="168" x="801.5" y="512.0078">all files in test case source</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="183" x="801.5" y="527.3184">dir are copied to the work dir</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="181" x="801.5" y="542.6289">except `node_modules` and</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="134" x="801.5" y="557.9395">`package-lock.json`</text><rect fill="#FEFECE" filter="url(#f6fomzz8ejd0v)" height="34.1328" rx="12.5" ry="12.5" style="stroke: #A80036; stroke-width: 1.5;" width="47" x="728.5" y="512.9941"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="27" x="738.5" y="534.5957">copy</text><polygon fill="#FEFECE" filter="url(#f6fomzz8ejd0v)" points="445.75,364.6152,589.75,364.6152,601.75,376.6152,589.75,388.6152,445.75,388.6152,433.75,376.6152,445.75,364.6152" style="stroke: #A80036; stroke-width: 1.5;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="144" x="445.75" y="380.7725">for each file in test case dir</text><path d="M601.25,654.3262 L601.25,685.9473 L581.25,689.9473 L601.25,693.9473 L601.25,725.5684 A0,0 0 0 0 601.25,725.5684 L830.25,725.5684 A0,0 0 0 0 830.25,725.5684 L830.25,664.3262 L820.25,654.3262 L601.25,654.3262 A0,0 0 0 0 601.25,654.3262 " fill="#FBFB77" filter="url(#f6fomzz8ejd0v)" style="stroke: #A80036; stroke-width: 1.0;"/><path d="M820.25,654.3262 L820.25,664.3262 L830.25,664.3262 L820.25,654.3262 " fill="#FBFB77" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="186" x="607.25" y="671.8945">some special files are created</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="208" x="607.25" y="687.2051">to handle hooks for example and</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="177" x="607.25" y="702.5156">grab `process()` IO for later</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="81" x="607.25" y="717.8262">expectations</text><rect fill="#FEFECE" filter="url(#f6fomzz8ejd0v)" height="34.1328" rx="12.5" ry="12.5" style="stroke: #A80036; stroke-width: 1.5;" width="127" x="454.25" y="672.8809"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="107" x="464.25" y="694.4824">create special files</text><path d="M608.75,735.5684 L608.75,767.1895 L588.75,771.1895 L608.75,775.1895 L608.75,806.8105 A0,0 0 0 0 608.75,806.8105 L809.75,806.8105 A0,0 0 0 0 809.75,806.8105 L809.75,745.5684 L799.75,735.5684 L608.75,735.5684 A0,0 0 0 0 608.75,735.5684 " fill="#FBFB77" filter="url(#f6fomzz8ejd0v)" style="stroke: #A80036; stroke-width: 1.0;"/><path d="M799.75,735.5684 L799.75,745.5684 L809.75,745.5684 L799.75,735.5684 " fill="#FBFB77" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="180" x="614.75" y="753.1367">set a custom but fixed name</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="176" x="614.75" y="768.4473">and version in package.json</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="146" x="614.75" y="783.7578">which is specific to the</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="129" x="614.75" y="799.0684">test case + template</text><rect fill="#FEFECE" filter="url(#f6fomzz8ejd0v)" height="34.1328" rx="12.5" ry="12.5" style="stroke: #A80036; stroke-width: 1.5;" width="142" x="446.75" y="754.123"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="122" x="456.75" y="775.7246">update package.json</text><rect fill="#FF6347" filter="url(#f6fomzz8ejd0v)" height="34.1328" rx="12.5" ry="12.5" style="stroke: #A80036; stroke-width: 1.5;" width="70" x="482.75" y="826.8105"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="50" x="492.75" y="848.4121">run tests</text><path d="M561.25,927.0781 L561.25,966.3545 L541.25,970.3545 L561.25,974.3545 L561.25,1013.6309 A0,0 0 0 0 561.25,1013.6309 L807.25,1013.6309 A0,0 0 0 0 807.25,1013.6309 L807.25,937.0781 L797.25,927.0781 L561.25,927.0781 A0,0 0 0 0 561.25,927.0781 " fill="#FBFB77" filter="url(#f6fomzz8ejd0v)" style="stroke: #A80036; stroke-width: 1.0;"/><path d="M797.25,927.0781 L797.25,937.0781 L807.25,937.0781 L797.25,927.0781 " fill="#FBFB77" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="225" x="567.25" y="944.6465">while we symlinked each snapshots</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="219" x="567.25" y="959.957">directory, newly created snapshots</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="193" x="567.25" y="975.2676">in non existing dir will need to</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="121" x="567.25" y="990.5781">be copied over into</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="167" x="567.25" y="1005.8887">e2e/__cases__/{test-case}</text><rect fill="#FEFECE" filter="url(#f6fomzz8ejd0v)" height="34.1328" rx="12.5" ry="12.5" style="stroke: #A80036; stroke-width: 1.5;" width="47" x="494.25" y="953.2881"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="27" x="504.25" y="974.8896">copy</text><polygon fill="#FEFECE" filter="url(#f6fomzz8ejd0v)" points="469.25,880.9434,566.25,880.9434,578.25,892.9434,566.25,904.9434,469.25,904.9434,457.25,892.9434,469.25,880.9434" style="stroke: #A80036; stroke-width: 1.5;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="105" x="521.75" y="915.5781">missing in test case</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="97" x="469.25" y="897.1006">for each snapshot</text><rect fill="#FEFECE" filter="url(#f6fomzz8ejd0v)" height="34.1328" rx="12.5" ry="12.5" style="stroke: #A80036; stroke-width: 1.5;" width="97" x="469.25" y="1055.6309"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="77" x="479.25" y="1077.2324">return results</text><ellipse cx="517.75" cy="1120.7637" fill="#FFFFFF" filter="url(#f6fomzz8ejd0v)" rx="11" ry="11" style="stroke: #000000; stroke-width: 1.0;"/><ellipse cx="517.75" cy="1120.7637" fill="#000000" rx="6" ry="6" style="stroke: #7F7F7F; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="517.75" x2="517.75" y1="30" y2="50"/><polygon fill="#A80036" points="513.75,40,517.75,50,521.75,40,517.75,44" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="517.75" x2="517.75" y1="154.2744" y2="181.9961"/><polygon fill="#A80036" points="513.75,171.9961,517.75,181.9961,521.75,171.9961,517.75,175.9961" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="596.25" x2="608.25" y1="142.2744" y2="142.2744"/><polygon fill="#A80036" points="604.25,189.0625,608.25,199.0625,612.25,189.0625,608.25,193.0625" style="stroke: #A80036; stroke-width: 1.5;"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="608.25" x2="608.25" y1="142.2744" y2="251.373"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="608.25" x2="529.75" y1="251.373" y2="251.373"/><polygon fill="#A80036" points="539.75,247.373,529.75,251.373,539.75,255.373,535.75,251.373" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="517.75" x2="517.75" y1="216.1289" y2="239.373"/><polygon fill="#A80036" points="513.75,229.373,517.75,239.373,521.75,229.373,517.75,233.373" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="517.75" x2="517.75" y1="84.1328" y2="130.2744"/><polygon fill="#A80036" points="513.75,120.2744,517.75,130.2744,521.75,120.2744,517.75,124.2744" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="261" x="521.75" y="108.832">e2e/__workdir_symlink__/{template}/{test-case}</text><line style="stroke: #A80036; stroke-width: 1.5;" x1="517.75" x2="517.75" y1="263.373" y2="291.9277"/><polygon fill="#A80036" points="513.75,281.9277,517.75,291.9277,521.75,281.9277,517.75,285.9277" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="609.5" x2="609.5" y1="488.75" y2="516.4717"/><polygon fill="#A80036" points="605.5,506.4717,609.5,516.4717,613.5,506.4717,609.5,510.4717" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="688" x2="700" y1="476.75" y2="476.75"/><polygon fill="#A80036" points="696,523.5381,700,533.5381,704,523.5381,700,527.5381" style="stroke: #A80036; stroke-width: 1.5;"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="700" x2="700" y1="476.75" y2="590.3262"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="700" x2="621.5" y1="590.3262" y2="590.3262"/><polygon fill="#A80036" points="631.5,586.3262,621.5,590.3262,631.5,594.3262,627.5,590.3262" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="609.5" x2="609.5" y1="550.6045" y2="578.3262"/><polygon fill="#A80036" points="605.5,568.3262,609.5,578.3262,613.5,568.3262,609.5,572.3262" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="346.5" x2="346.5" y1="432.6152" y2="483.3047"/><polygon fill="#A80036" points="342.5,473.3047,346.5,483.3047,350.5,473.3047,346.5,477.3047" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="346.5" x2="346.5" y1="517.4375" y2="622.3262"/><polygon fill="#A80036" points="342.5,612.3262,346.5,622.3262,350.5,612.3262,346.5,616.3262" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="609.5" x2="609.5" y1="432.6152" y2="464.75"/><polygon fill="#A80036" points="605.5,454.75,609.5,464.75,613.5,454.75,609.5,458.75" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="609.5" x2="609.5" y1="602.3262" y2="622.3262"/><polygon fill="#A80036" points="605.5,612.3262,609.5,622.3262,613.5,612.3262,609.5,616.3262" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="398.5" x2="557.5" y1="420.6152" y2="420.6152"/><polygon fill="#A80036" points="547.5,416.6152,557.5,420.6152,547.5,424.6152,551.5,420.6152" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="517.75" x2="517.75" y1="388.6152" y2="393.6152"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="517.75" x2="346.5" y1="393.6152" y2="393.6152"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="346.5" x2="346.5" y1="393.6152" y2="408.6152"/><polygon fill="#A80036" points="342.5,398.6152,346.5,408.6152,350.5,398.6152,346.5,402.6152" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="661.5" x2="752" y1="420.6152" y2="420.6152"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="752" x2="752" y1="420.6152" y2="512.9941"/><polygon fill="#A80036" points="748,502.9941,752,512.9941,756,502.9941,752,506.9941" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="752" x2="752" y1="547.127" y2="622.3262"/><polygon fill="#A80036" points="748,612.3262,752,622.3262,756,612.3262,752,616.3262" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="346.5" x2="752" y1="622.3262" y2="622.3262"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="517.75" x2="517.75" y1="622.3262" y2="632.3262"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="517.75" x2="1011.5" y1="632.3262" y2="632.3262"/><polygon fill="#A80036" points="1007.5,528.0605,1011.5,518.0605,1015.5,528.0605,1011.5,524.0605" style="stroke: #A80036; stroke-width: 1.5;"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="1011.5" x2="1011.5" y1="376.6152" y2="632.3262"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="1011.5" x2="601.75" y1="376.6152" y2="376.6152"/><polygon fill="#A80036" points="611.75,372.6152,601.75,376.6152,611.75,380.6152,607.75,376.6152" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="433.75" x2="24" y1="376.6152" y2="376.6152"/><polygon fill="#A80036" points="20,514.0605,24,524.0605,28,514.0605,24,518.0605" style="stroke: #A80036; stroke-width: 1.5;"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="24" x2="24" y1="376.6152" y2="644.3262"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="24" x2="517.75" y1="644.3262" y2="644.3262"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="517.75" x2="517.75" y1="644.3262" y2="672.8809"/><polygon fill="#A80036" points="513.75,662.8809,517.75,672.8809,521.75,662.8809,517.75,666.8809" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="517.75" x2="517.75" y1="326.0605" y2="364.6152"/><polygon fill="#A80036" points="513.75,354.6152,517.75,364.6152,521.75,354.6152,517.75,358.6152" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="517.75" x2="517.75" y1="707.0137" y2="754.123"/><polygon fill="#A80036" points="513.75,744.123,517.75,754.123,521.75,744.123,517.75,748.123" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="517.75" x2="517.75" y1="788.2559" y2="826.8105"/><polygon fill="#A80036" points="513.75,816.8105,517.75,826.8105,521.75,816.8105,517.75,820.8105" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="517.75" x2="517.75" y1="904.9434" y2="953.2881"/><polygon fill="#A80036" points="513.75,943.2881,517.75,953.2881,521.75,943.2881,517.75,947.2881" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="517.75" x2="517.75" y1="987.4209" y2="1023.6309"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="517.75" x2="819.25" y1="1023.6309" y2="1023.6309"/><polygon fill="#A80036" points="815.25,961.877,819.25,951.877,823.25,961.877,819.25,957.877" style="stroke: #A80036; stroke-width: 1.5;"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="819.25" x2="819.25" y1="892.9434" y2="1023.6309"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="819.25" x2="578.25" y1="892.9434" y2="892.9434"/><polygon fill="#A80036" points="588.25,888.9434,578.25,892.9434,588.25,896.9434,584.25,892.9434" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="457.25" x2="445.25" y1="892.9434" y2="892.9434"/><polygon fill="#A80036" points="441.25,947.877,445.25,957.877,449.25,947.877,445.25,951.877" style="stroke: #A80036; stroke-width: 1.5;"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="445.25" x2="445.25" y1="892.9434" y2="1035.6309"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="445.25" x2="517.75" y1="1035.6309" y2="1035.6309"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="517.75" x2="517.75" y1="1035.6309" y2="1055.6309"/><polygon fill="#A80036" points="513.75,1045.6309,517.75,1055.6309,521.75,1045.6309,517.75,1049.6309" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="517.75" x2="517.75" y1="860.9434" y2="880.9434"/><polygon fill="#A80036" points="513.75,870.9434,517.75,880.9434,521.75,870.9434,517.75,874.9434" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="517.75" x2="517.75" y1="1089.7637" y2="1109.7637"/><polygon fill="#A80036" points="513.75,1099.7637,517.75,1109.7637,521.75,1099.7637,517.75,1103.7637" style="stroke: #A80036; stroke-width: 1.0;"/><!--MD5=[d6c845d6a9e70eb34ab75b09f835d9a5]
@startuml


start

:create work dir;
note right
  It'll be different per test-case
  and per template basis.
end note
-> e2e/~__workdir_symlink__/{template}/{test-case};

if (has a node_modules dir?) then (yes)
  :symlink node_modules;
  note left
    avoid re-running npm install
    for each test case and template;
  end note
else (no)
endif

:copy files from template;
note right
  all files in template dir are
  copied to test case work dir
  except `node_modules` and
  `package-lock.json`
end note

while (for each file in test case dir)
  if (is snapshot dir) then (yes)
    :symlink dir;
    note left
      snapshots directories are symlinked
      to test case source dir so that
      updating them would update in the
      source folder
    end note

  else if (is jest.config.js) then (yes)
    if (jest.config.js is function?) then (yes)
      :call with parent content;
      note left
        allows for
        extending
      end note
    else (no)
    endif

  else (others)
    :copy;
    note right
      all files in test case source
      dir are copied to the work dir
      except `node_modules` and
      `package-lock.json`
    end note

  endif
endwhile

:create special files;
note right
  some special files are created
  to handle hooks for example and
  grab `process()` IO for later
  expectations
end note

:update package.json;
note right
  set a custom but fixed name
  and version in package.json
  which is specific to the
  test case + template
end note

#tomato:run tests;

while (for each snapshot) is (missing in test case)
  :copy;
  note right
    while we symlinked each snapshots
    directory, newly created snapshots
    in non existing dir will need to
    be copied over into
    e2e/~__cases__/{test-case}
  end note
endwhile

:return results;

stop


@enduml

PlantUML version 1.2020.05(Fri Mar 20 02:47:32 IST 2020)
(GPL source distribution)
Java Runtime: OpenJDK Runtime Environment
JVM: OpenJDK 64-Bit Server VM
Java Version: 13.0.2+8
Operating System: Mac OS X
Default Encoding: UTF-8
Language: en
Country: IN
--></g></svg>