<?xml version="1.0" encoding="UTF-8" standalone="no"?><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentScriptType="application/ecmascript" contentStyleType="text/css" height="927px" preserveAspectRatio="none" style="width:796px;height:927px;" version="1.1" viewBox="0 0 796 927" width="796px" zoomAndPan="magnify"><defs><filter height="300%" id="f14d5ngxdxtuc4" width="300%" x="-1" y="-1"><feGaussianBlur result="blurOut" stdDeviation="2.0"/><feColorMatrix in="blurOut" result="blurOut2" type="matrix" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 .4 0"/><feOffset dx="4.0" dy="4.0" in="blurOut2" result="blurOut3"/><feBlend in="SourceGraphic" in2="blurOut3" mode="normal"/></filter></defs><g><ellipse cx="250" cy="20" fill="#000000" filter="url(#f14d5ngxdxtuc4)" rx="10" ry="10" style="stroke: none; stroke-width: 1.0;"/><path d="M321,54.4111 L321,63.0664 L301,67.0664 L321,71.0664 L321,79.7217 A0,0 0 0 0 321,79.7217 L617,79.7217 A0,0 0 0 0 617,79.7217 L617,64.4111 L607,54.4111 L321,54.4111 A0,0 0 0 0 321,54.4111 " fill="#FBFB77" filter="url(#f14d5ngxdxtuc4)" style="stroke: #A80036; stroke-width: 1.0;"/><path d="M607,54.4111 L607,64.4111 L617,64.4111 L607,54.4111 " fill="#FBFB77" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="275" x="327" y="71.9795">will build ts-jest before creating the bundle</text><rect fill="#FEFECE" filter="url(#f14d5ngxdxtuc4)" height="34.1328" rx="12.5" ry="12.5" style="stroke: #A80036; stroke-width: 1.5;" width="102" x="199" y="50"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="82" x="209" y="71.6016">bundle ts-jest</text><path d="M341,100.8887 L341,117.1992 L321,121.1992 L341,125.1992 L341,141.5098 A0,0 0 0 0 341,141.5098 L605,141.5098 A0,0 0 0 0 605,141.5098 L605,110.8887 L595,100.8887 L341,100.8887 A0,0 0 0 0 341,100.8887 " fill="#FBFB77" filter="url(#f14d5ngxdxtuc4)" style="stroke: #A80036; stroke-width: 1.0;"/><path d="M595,100.8887 L595,110.8887 L605,110.8887 L595,100.8887 " fill="#FBFB77" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="243" x="347" y="118.457">`e2e/__workdir_symlink__` links to it</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="169" x="347" y="133.7676">except on CI environments</text><rect fill="#FEFECE" filter="url(#f14d5ngxdxtuc4)" height="34.1328" rx="12.5" ry="12.5" style="stroke: #A80036; stroke-width: 1.5;" width="142" x="179" y="104.1328"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="122" x="189" y="125.7344">create temp work dir</text><path d="M516,494.2744 L516,519.585 L784,519.585 L784,504.2744 L774,494.2744 L516,494.2744 " fill="#FBFB77" filter="url(#f14d5ngxdxtuc4)" style="stroke: #A80036; stroke-width: 1.0;"/><path d="M774,494.2744 L774,504.2744 L784,504.2744 L774,494.2744 " fill="#FBFB77" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="247" x="522" y="511.8428">templates are in `e2e/__templates__/`</text><polygon fill="#FEFECE" filter="url(#f14d5ngxdxtuc4)" points="181.5,205.5098,318.5,205.5098,330.5,217.5098,318.5,229.5098,181.5,229.5098,169.5,217.5098,181.5,205.5098" style="stroke: #A80036; stroke-width: 1.5;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="137" x="181.5" y="221.667">template's build directory</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="32" x="137.5" y="215.1895">exists</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="53" x="330.5" y="215.1895">not exists</text><rect fill="#FEFECE" filter="url(#f14d5ngxdxtuc4)" height="34.1328" rx="12.5" ry="12.5" style="stroke: #A80036; stroke-width: 1.5;" width="192" x="63.5" y="239.5098"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="172" x="73.5" y="261.1113">wipe but `node_modules` dir</text><rect fill="#FEFECE" filter="url(#f14d5ngxdxtuc4)" height="34.1328" rx="12.5" ry="12.5" style="stroke: #A80036; stroke-width: 1.5;" width="56" x="312.5" y="239.5098"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="36" x="322.5" y="261.1113">create</text><polygon fill="#FEFECE" filter="url(#f14d5ngxdxtuc4)" points="250,279.6426,262,291.6426,250,303.6426,238,291.6426,250,279.6426" style="stroke: #A80036; stroke-width: 1.5;"/><rect fill="#FEFECE" filter="url(#f14d5ngxdxtuc4)" height="34.1328" rx="12.5" ry="12.5" style="stroke: #A80036; stroke-width: 1.5;" width="274" x="113" y="323.6426"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="254" x="123" y="345.2441">copy files from template's dir to its build dir</text><rect fill="#FEFECE" filter="url(#f14d5ngxdxtuc4)" height="34.1328" rx="12.5" ry="12.5" style="stroke: #A80036; stroke-width: 1.5;" width="106" x="197" y="426.2529"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="86" x="207" y="447.8545">read metadata</text><polygon fill="#FEFECE" filter="url(#f14d5ngxdxtuc4)" points="86.5,480.3857,174.5,480.3857,186.5,492.3857,174.5,504.3857,86.5,504.3857,74.5,492.3857,86.5,480.3857" style="stroke: #A80036; stroke-width: 1.5;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="68" x="134.5" y="515.0205">has changed</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="88" x="86.5" y="496.543">package lock file</text><rect fill="#FEFECE" filter="url(#f14d5ngxdxtuc4)" height="34.1328" rx="12.5" ry="12.5" style="stroke: #A80036; stroke-width: 1.5;" width="185" x="38" y="537.3408"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="165" x="48" y="558.9424">remove `node_modules` dir</text><rect fill="#FEFECE" filter="url(#f14d5ngxdxtuc4)" height="34.1328" rx="12.5" ry="12.5" style="stroke: #A80036; stroke-width: 1.5;" width="120" x="70.5" y="591.4736"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="100" x="80.5" y="613.0752">npm install (or ci)</text><rect fill="#FEFECE" filter="url(#f14d5ngxdxtuc4)" height="34.1328" rx="12.5" ry="12.5" style="stroke: #A80036; stroke-width: 1.5;" width="169" x="46" y="645.6064"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="149" x="56" y="667.208">npm install ts-jest bundle</text><polygon fill="#FEFECE" filter="url(#f14d5ngxdxtuc4)" points="290,480.3857,365,480.3857,377,492.3857,365,504.3857,290,504.3857,278,492.3857,290,480.3857" style="stroke: #A80036; stroke-width: 1.5;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="68" x="331.5" y="515.0205">has changed</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="75" x="290" y="496.543">ts-jest bundle</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="82" x="377" y="490.0654">hasn't changed</text><rect fill="#FEFECE" filter="url(#f14d5ngxdxtuc4)" height="34.1328" rx="12.5" ry="12.5" style="stroke: #A80036; stroke-width: 1.5;" width="169" x="243" y="537.3408"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="149" x="253" y="558.9424">npm install ts-jest bundle</text><rect fill="#FEFECE" filter="url(#f14d5ngxdxtuc4)" height="34.1328" rx="12.5" ry="12.5" style="stroke: #A80036; stroke-width: 1.5;" width="160" x="170" y="719.7393"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="140" x="180" y="741.3408">write updated metadata</text><polygon fill="#FEFECE" filter="url(#f14d5ngxdxtuc4)" points="206,377.7754,294,377.7754,306,389.7754,294,401.7754,206,401.7754,194,389.7754,206,377.7754" style="stroke: #A80036; stroke-width: 1.5;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="32" x="254" y="412.4102">exists</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="88" x="206" y="393.9326">package lock file</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="53" x="306" y="387.4551">not exists</text><polygon fill="#FEFECE" filter="url(#f14d5ngxdxtuc4)" points="250,773.8721,262,785.8721,250,797.8721,238,785.8721,250,773.8721" style="stroke: #A80036; stroke-width: 1.5;"/><polygon fill="#FEFECE" filter="url(#f14d5ngxdxtuc4)" points="203.5,161.5098,296.5,161.5098,308.5,173.5098,296.5,185.5098,203.5,185.5098,191.5,173.5098,203.5,161.5098" style="stroke: #A80036; stroke-width: 1.5;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="93" x="203.5" y="177.667">for each template</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="27" x="164.5" y="171.1895">done</text><rect fill="#FEFECE" filter="url(#f14d5ngxdxtuc4)" height="34.1328" rx="12.5" ry="12.5" style="stroke: #A80036; stroke-width: 1.5;" width="131" x="184.5" y="839.8721"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="111" x="194.5" y="861.4736">all templates ready</text><ellipse cx="250" cy="905.0049" fill="#FFFFFF" filter="url(#f14d5ngxdxtuc4)" rx="11" ry="11" style="stroke: #000000; stroke-width: 1.0;"/><ellipse cx="250" cy="905.0049" fill="#000000" rx="6" ry="6" style="stroke: #7F7F7F; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="250" x2="250" y1="30" y2="50"/><polygon fill="#A80036" points="246,40,250,50,254,40,250,44" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="250" x2="250" y1="84.1328" y2="104.1328"/><polygon fill="#A80036" points="246,94.1328,250,104.1328,254,94.1328,250,98.1328" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="169.5" x2="159.5" y1="217.5098" y2="217.5098"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="159.5" x2="159.5" y1="217.5098" y2="239.5098"/><polygon fill="#A80036" points="155.5,229.5098,159.5,239.5098,163.5,229.5098,159.5,233.5098" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="330.5" x2="340.5" y1="217.5098" y2="217.5098"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="340.5" x2="340.5" y1="217.5098" y2="239.5098"/><polygon fill="#A80036" points="336.5,229.5098,340.5,239.5098,344.5,229.5098,340.5,233.5098" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="159.5" x2="159.5" y1="273.6426" y2="291.6426"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="159.5" x2="238" y1="291.6426" y2="291.6426"/><polygon fill="#A80036" points="228,287.6426,238,291.6426,228,295.6426,232,291.6426" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="340.5" x2="340.5" y1="273.6426" y2="291.6426"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="340.5" x2="262" y1="291.6426" y2="291.6426"/><polygon fill="#A80036" points="272,287.6426,262,291.6426,272,295.6426,268,291.6426" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="250" x2="250" y1="303.6426" y2="323.6426"/><polygon fill="#A80036" points="246,313.6426,250,323.6426,254,313.6426,250,317.6426" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="130.5" x2="130.5" y1="571.4736" y2="591.4736"/><polygon fill="#A80036" points="126.5,581.4736,130.5,591.4736,134.5,581.4736,130.5,585.4736" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="130.5" x2="130.5" y1="625.6064" y2="645.6064"/><polygon fill="#A80036" points="126.5,635.6064,130.5,645.6064,134.5,635.6064,130.5,639.6064" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="130.5" x2="130.5" y1="504.3857" y2="537.3408"/><polygon fill="#A80036" points="126.5,527.3408,130.5,537.3408,134.5,527.3408,130.5,531.3408" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="130.5" x2="130.5" y1="679.7393" y2="699.7393"/><polygon fill="#A80036" points="126.5,689.7393,130.5,699.7393,134.5,689.7393,130.5,693.7393" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="327.5" x2="327.5" y1="504.3857" y2="537.3408"/><polygon fill="#A80036" points="323.5,527.3408,327.5,537.3408,331.5,527.3408,327.5,531.3408" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="327.5" x2="327.5" y1="571.4736" y2="699.7393"/><polygon fill="#A80036" points="323.5,689.7393,327.5,699.7393,331.5,689.7393,327.5,693.7393" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="186.5" x2="278" y1="492.3857" y2="492.3857"/><polygon fill="#A80036" points="268,488.3857,278,492.3857,268,496.3857,272,492.3857" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="250" x2="250" y1="460.3857" y2="465.3857"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="250" x2="130.5" y1="465.3857" y2="465.3857"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="130.5" x2="130.5" y1="465.3857" y2="480.3857"/><polygon fill="#A80036" points="126.5,470.3857,130.5,480.3857,134.5,470.3857,130.5,474.3857" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="377" x2="447" y1="492.3857" y2="492.3857"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="447" x2="447" y1="492.3857" y2="699.7393"/><polygon fill="#A80036" points="443,689.7393,447,699.7393,451,689.7393,447,693.7393" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="130.5" x2="447" y1="699.7393" y2="699.7393"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="250" x2="250" y1="699.7393" y2="719.7393"/><polygon fill="#A80036" points="246,709.7393,250,719.7393,254,709.7393,250,713.7393" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="250" x2="250" y1="401.7754" y2="426.2529"/><polygon fill="#A80036" points="246,416.2529,250,426.2529,254,416.2529,250,420.2529" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="306" x2="472" y1="389.7754" y2="389.7754"/><polygon fill="#A80036" points="468,595.0625,472,605.0625,476,595.0625,472,599.0625" style="stroke: #A80036; stroke-width: 1.5;"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="472" x2="472" y1="389.7754" y2="785.8721"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="472" x2="262" y1="785.8721" y2="785.8721"/><polygon fill="#A80036" points="272,781.8721,262,785.8721,272,789.8721,268,785.8721" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="250" x2="250" y1="753.8721" y2="773.8721"/><polygon fill="#A80036" points="246,763.8721,250,773.8721,254,763.8721,250,767.8721" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="250" x2="250" y1="357.7754" y2="377.7754"/><polygon fill="#A80036" points="246,367.7754,250,377.7754,254,367.7754,250,371.7754" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="250" x2="250" y1="185.5098" y2="205.5098"/><polygon fill="#A80036" points="246,195.5098,250,205.5098,254,195.5098,250,199.5098" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="250" x2="250" y1="797.8721" y2="807.8721"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="250" x2="496" y1="807.8721" y2="807.8721"/><polygon fill="#A80036" points="492,516.9297,496,506.9297,500,516.9297,496,512.9297" style="stroke: #A80036; stroke-width: 1.5;"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="496" x2="496" y1="173.5098" y2="807.8721"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="496" x2="308.5" y1="173.5098" y2="173.5098"/><polygon fill="#A80036" points="318.5,169.5098,308.5,173.5098,318.5,177.5098,314.5,173.5098" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="191.5" x2="24" y1="173.5098" y2="173.5098"/><polygon fill="#A80036" points="20,502.9297,24,512.9297,28,502.9297,24,506.9297" style="stroke: #A80036; stroke-width: 1.5;"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="24" x2="24" y1="173.5098" y2="819.8721"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="24" x2="250" y1="819.8721" y2="819.8721"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="250" x2="250" y1="819.8721" y2="839.8721"/><polygon fill="#A80036" points="246,829.8721,250,839.8721,254,829.8721,250,833.8721" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="250" x2="250" y1="138.2656" y2="161.5098"/><polygon fill="#A80036" points="246,151.5098,250,161.5098,254,151.5098,250,155.5098" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="250" x2="250" y1="874.0049" y2="894.0049"/><polygon fill="#A80036" points="246,884.0049,250,894.0049,254,884.0049,250,888.0049" style="stroke: #A80036; stroke-width: 1.0;"/><!--MD5=[22cd070aaa76a1b19624c2dbe70fd941]
@startuml


start

:bundle ts-jest;
note right
  will build ts-jest before creating the bundle
end note

:create temp work dir;
note right
  `e2e/~__workdir_symlink__` links to it
  except on CI environments
end note

while (for each template)
  note right
    templates are in `e2e/~__templates__/`
  end note

  if (template's build directory) then (exists)
    :wipe but `node_modules` dir;
  else (not exists)
    :create;
  endif

  :copy files from template's dir to its build dir;

  if (package lock file) then (exists)
    :read metadata;

    if (package lock file) then (has changed)
      :remove `node_modules` dir;

      :npm install (or ci);

      :npm install ts-jest bundle;

    else if (ts-jest bundle) then (has changed)
      :npm install ts-jest bundle;

    else (hasn't changed)
    endif
    :write updated metadata;

  else (not exists)
  endif

endwhile (done)

:all templates ready;

stop


@enduml

PlantUML version 1.2020.05(Fri Mar 20 02:47:32 IST 2020)
(GPL source distribution)
Java Runtime: OpenJDK Runtime Environment
JVM: OpenJDK 64-Bit Server VM
Java Version: 13.0.2+8
Operating System: Mac OS X
Default Encoding: UTF-8
Language: en
Country: IN
--></g></svg>