<?xml version="1.0" encoding="UTF-8" standalone="no"?><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentScriptType="application/ecmascript" contentStyleType="text/css" height="1704px" preserveAspectRatio="none" style="width:1318px;height:1704px;" version="1.1" viewBox="0 0 1318 1704" width="1318px" zoomAndPan="magnify"><defs><filter height="300%" id="f11viywf3yvuni" width="300%" x="-1" y="-1"><feGaussianBlur result="blurOut" stdDeviation="2.0"/><feColorMatrix in="blurOut" result="blurOut2" type="matrix" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 .4 0"/><feOffset dx="4.0" dy="4.0" in="blurOut2" result="blurOut3"/><feBlend in="SourceGraphic" in2="blurOut3" mode="normal"/></filter></defs><g><text fill="#000000" font-family="sans-serif" font-size="18" lengthAdjust="spacingAndGlyphs" textLength="85" x="203.2188" y="29.4531">processor</text><line style="stroke: #000000; stroke-width: 2.0;" x1="10" x2="10" y1="12.7451" y2="1692.9639"/><ellipse cx="354.9375" cy="43.6982" fill="#000000" filter="url(#f11viywf3yvuni)" rx="10" ry="10" style="stroke: none; stroke-width: 1.0;"/><rect fill="#FEFECE" filter="url(#f11viywf3yvuni)" height="33.9688" rx="12.5" ry="12.5" style="stroke: #A80036; stroke-width: 1.5;" width="162" x="273.9375" y="88.6982"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="142" x="283.9375" y="109.8369">tsJest.process(source)</text><rect fill="#FEFECE" filter="url(#f11viywf3yvuni)" height="33.9688" rx="12.5" ry="12.5" style="stroke: #A80036; stroke-width: 1.5;" width="99" x="305.4375" y="206.0693"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="79" x="315.4375" y="227.208">json stringify</text><polygon fill="#FEFECE" filter="url(#f11viywf3yvuni)" points="307.9375,157.667,401.9375,157.667,413.9375,169.667,401.9375,181.667,307.9375,181.667,295.9375,169.667,307.9375,157.667" style="stroke: #A80036; stroke-width: 1.5;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="20" x="358.9375" y="191.8774">yes</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="94" x="307.9375" y="173.4751">should stringify?</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="14" x="413.9375" y="167.0728">no</text><polygon fill="#FEFECE" filter="url(#f11viywf3yvuni)" points="354.9375,290.0498,366.9375,302.0498,354.9375,314.0498,342.9375,302.0498,354.9375,290.0498" style="stroke: #A80036; stroke-width: 1.5;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="39" x="360.9375" y="274.6509">update</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="39" x="360.9375" y="287.4556">source</text><polygon fill="#FEFECE" filter="url(#f11viywf3yvuni)" points="285.9375,349.0498,423.9375,349.0498,435.9375,361.0498,423.9375,373.0498,285.9375,373.0498,273.9375,361.0498,285.9375,349.0498" style="stroke: #A80036; stroke-width: 1.5;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="138" x="285.9375" y="364.8579">filename ends with .d.ts</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="20" x="253.9375" y="358.4556">yes</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="14" x="435.9375" y="358.4556">no</text><polygon fill="#FBFB77" filter="url(#f11viywf3yvuni)" points="135,393.0498,135,433.3154,279,433.3154,279,403.0498,269,393.0498,135,393.0498" style="stroke: #A80036; stroke-width: 1.0;"/><polygon fill="#FBFB77" points="135,393.0498,135,409.1826,115,413.1826,135,417.1826,135,433.3154,279,433.3154,279,403.0498,269,393.0498,135,393.0498" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="269" x2="269" y1="393.0498" y2="403.0498"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="279" x2="269" y1="403.0498" y2="403.0498"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="123" x="141" y="410.1167">no need to compile</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="87" x="141" y="425.2495">definition files</text><rect fill="#FEFECE" filter="url(#f11viywf3yvuni)" height="33.9688" rx="12.5" ry="12.5" style="stroke: #A80036; stroke-width: 1.5;" width="95" x="20" y="396.1982"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="75" x="30" y="417.3369">wipe source</text><polygon fill="#FEFECE" filter="url(#f11viywf3yvuni)" points="354.9375,1134.5029,366.9375,1146.5029,354.9375,1158.5029,342.9375,1146.5029,354.9375,1134.5029" style="stroke: #A80036; stroke-width: 1.5;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="39" x="366.9375" y="1131.104">update</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="39" x="366.9375" y="1143.9087">source</text><polygon fill="#FBFB77" filter="url(#f11viywf3yvuni)" points="126.4375,1241.9053,126.4375,1282.1709,242.4375,1282.1709,242.4375,1251.9053,232.4375,1241.9053,126.4375,1241.9053" style="stroke: #A80036; stroke-width: 1.0;"/><polygon fill="#FBFB77" points="126.4375,1241.9053,126.4375,1282.1709,242.4375,1282.1709,242.4375,1266.0381,262.4375,1262.0381,242.4375,1258.0381,242.4375,1251.9053,232.4375,1241.9053,126.4375,1241.9053" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="232.4375" x2="232.4375" y1="1241.9053" y2="1251.9053"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="242.4375" x2="232.4375" y1="1251.9053" y2="1251.9053"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="95" x="132.4375" y="1258.9722">calls babel-jest</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="63" x="132.4375" y="1274.105">processor</text><rect fill="#FEFECE" filter="url(#f11viywf3yvuni)" height="33.9688" rx="12.5" ry="12.5" style="stroke: #A80036; stroke-width: 1.5;" width="185" x="262.4375" y="1245.0537"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="165" x="272.4375" y="1266.1924">babelJest.process(source)</text><polygon fill="#FEFECE" filter="url(#f11viywf3yvuni)" points="302.9375,1193.5029,406.9375,1193.5029,418.9375,1205.5029,406.9375,1217.5029,302.9375,1217.5029,290.9375,1205.5029,302.9375,1193.5029" style="stroke: #A80036; stroke-width: 1.5;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="20" x="358.9375" y="1227.7134">yes</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="104" x="302.9375" y="1209.311">should use babel?</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="14" x="418.9375" y="1202.9087">no</text><polygon fill="#FEFECE" filter="url(#f11viywf3yvuni)" points="354.9375,1332.1826,366.9375,1344.1826,354.9375,1356.1826,342.9375,1344.1826,354.9375,1332.1826" style="stroke: #A80036; stroke-width: 1.5;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="39" x="360.9375" y="1316.7837">update</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="39" x="360.9375" y="1329.5884">source</text><polygon fill="#FBFB77" filter="url(#f11viywf3yvuni)" points="107.9375,1439.585,107.9375,1494.9834,254.9375,1494.9834,254.9375,1449.585,244.9375,1439.585,107.9375,1439.585" style="stroke: #A80036; stroke-width: 1.0;"/><polygon fill="#FBFB77" points="107.9375,1439.585,107.9375,1494.9834,254.9375,1494.9834,254.9375,1471.2842,274.9375,1467.2842,254.9375,1463.2842,254.9375,1449.585,244.9375,1439.585,107.9375,1439.585" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="244.9375" x2="244.9375" y1="1439.585" y2="1449.585"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="254.9375" x2="244.9375" y1="1449.585" y2="1449.585"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="117" x="113.9375" y="1456.6519">if the hook returns</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="109" x="113.9375" y="1471.7847">something it'll be</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="126" x="113.9375" y="1486.9175">used as new source</text><rect fill="#FEFECE" filter="url(#f11viywf3yvuni)" height="33.9688" rx="12.5" ry="12.5" style="stroke: #A80036; stroke-width: 1.5;" width="160" x="274.9375" y="1450.2998"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="140" x="284.9375" y="1471.4385">call afterProcess hook</text><polygon fill="#FEFECE" filter="url(#f11viywf3yvuni)" points="287.4375,1391.1826,422.4375,1391.1826,434.4375,1403.1826,422.4375,1415.1826,287.4375,1415.1826,275.4375,1403.1826,287.4375,1391.1826" style="stroke: #A80036; stroke-width: 1.5;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="20" x="358.9375" y="1425.3931">yes</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="135" x="287.4375" y="1406.9907">has afterProcess hook?</text><polygon fill="#FEFECE" filter="url(#f11viywf3yvuni)" points="354.9375,1544.9951,366.9375,1556.9951,354.9375,1568.9951,342.9375,1556.9951,354.9375,1544.9951" style="stroke: #A80036; stroke-width: 1.5;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="39" x="360.9375" y="1529.5962">update</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="39" x="360.9375" y="1542.4009">source</text><rect fill="#FEFECE" filter="url(#f11viywf3yvuni)" height="33.9688" rx="12.5" ry="12.5" style="stroke: #A80036; stroke-width: 1.5;" width="144" x="282.9375" y="1603.9951"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="124" x="292.9375" y="1625.1338">transformed source</text><ellipse cx="354.9375" cy="1682.9639" fill="#FFFFFF" filter="url(#f11viywf3yvuni)" rx="10" ry="10" style="stroke: #000000; stroke-width: 1.5;"/><line style="stroke: #000000; stroke-width: 2.5;" x1="348.7503" x2="361.1247" y1="1676.7767" y2="1689.1511"/><line style="stroke: #000000; stroke-width: 2.5;" x1="361.1247" x2="348.7503" y1="1676.7767" y2="1689.1511"/><rect fill="#D8BFD8" height="1680.2188" style="stroke: #D8BFD8; stroke-width: 1.0;" width="825" x="481.4375" y="12.7451"/><text fill="#000000" font-family="sans-serif" font-size="18" lengthAdjust="spacingAndGlyphs" textLength="158" x="814.9375" y="29.4531">compiler (cached)</text><line style="stroke: #000000; stroke-width: 2.0;" x1="481.4375" x2="481.4375" y1="12.7451" y2="1692.9639"/><rect fill="#FEFECE" filter="url(#f11viywf3yvuni)" height="47.9375" rx="12.5" ry="12.5" style="stroke: #A80036; stroke-width: 1.5;" width="131" x="759.3125" y="441.4521"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="111" x="769.3125" y="462.5908">create and cache</text><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="91" x="769.3125" y="476.5596">ts lang service</text><polygon fill="#FEFECE" filter="url(#f11viywf3yvuni)" points="772.8125,393.0498,876.8125,393.0498,888.8125,405.0498,876.8125,417.0498,772.8125,417.0498,760.8125,405.0498,772.8125,393.0498" style="stroke: #A80036; stroke-width: 1.5;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="14" x="828.8125" y="427.2603">no</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="104" x="772.8125" y="408.8579">isolated modules?</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="20" x="888.8125" y="402.4556">yes</text><polygon fill="#FEFECE" filter="url(#f11viywf3yvuni)" points="824.8125,513.792,836.8125,525.792,824.8125,537.792,812.8125,525.792,824.8125,513.792" style="stroke: #A80036; stroke-width: 1.5;"/><polygon fill="#FEFECE" filter="url(#f11viywf3yvuni)" points="767.3125,585.5967,882.3125,585.5967,894.3125,597.5967,882.3125,609.5967,767.3125,609.5967,755.3125,597.5967,767.3125,585.5967" style="stroke: #A80036; stroke-width: 1.5;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="115" x="767.3125" y="601.4048">in persistent cache?</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="20" x="735.3125" y="595.0024">yes</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="14" x="894.3125" y="595.0024">no</text><rect fill="#FEFECE" filter="url(#f11viywf3yvuni)" height="47.9375" rx="12.5" ry="12.5" style="stroke: #A80036; stroke-width: 1.5;" width="158" x="491.4375" y="619.5967"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="121" x="501.4375" y="640.7354">update mem cache</text><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="138" x="501.4375" y="654.7041">from persistent cache</text><polygon fill="#FEFECE" filter="url(#f11viywf3yvuni)" points="1027.1875,619.5967,1131.1875,619.5967,1143.1875,631.5967,1131.1875,643.5967,1027.1875,643.5967,1015.1875,631.5967,1027.1875,619.5967" style="stroke: #A80036; stroke-width: 1.5;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="104" x="1027.1875" y="635.4048">isolated modules?</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="20" x="995.1875" y="629.0024">yes</text><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="14" x="1143.1875" y="629.0024">no</text><polygon fill="#FBFB77" filter="url(#f11viywf3yvuni)" points="679.4375,657.4326,679.4375,697.6982,829.4375,697.6982,829.4375,667.4326,819.4375,657.4326,679.4375,657.4326" style="stroke: #A80036; stroke-width: 1.0;"/><polygon fill="#FBFB77" points="679.4375,657.4326,679.4375,697.6982,829.4375,697.6982,829.4375,681.5654,849.4375,677.5654,829.4375,673.5654,829.4375,667.4326,819.4375,657.4326,679.4375,657.4326" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="819.4375" x2="819.4375" y1="657.4326" y2="667.4326"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="829.4375" x2="819.4375" y1="667.4326" y2="667.4326"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="129" x="685.4375" y="674.4995">files will be compiled</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="128" x="685.4375" y="689.6323">as isolated modules</text><rect fill="#FEFECE" filter="url(#f11viywf3yvuni)" height="47.9375" rx="12.5" ry="12.5" style="stroke: #A80036; stroke-width: 1.5;" width="120" x="849.4375" y="653.5967"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="77" x="859.4375" y="674.7354">compile with</text><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="100" x="859.4375" y="688.7041">transpileModule</text><polygon fill="#FBFB77" filter="url(#f11viywf3yvuni)" points="989.4375,653.5967,989.4375,739.2607,1180.4375,739.2607,1180.4375,663.5967,1170.4375,653.5967,989.4375,653.5967" style="stroke: #A80036; stroke-width: 1.0;"/><polygon fill="#FBFB77" points="989.4375,653.5967,989.4375,739.2607,1180.4375,739.2607,1180.4375,700.4287,1200.4375,696.4287,1180.4375,692.4287,1180.4375,663.5967,1170.4375,653.5967,989.4375,653.5967" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="1170.4375" x2="1170.4375" y1="653.5967" y2="663.5967"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="1180.4375" x2="1170.4375" y1="663.5967" y2="663.5967"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="153" x="995.4375" y="670.6636">make use of the service</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="170" x="995.4375" y="685.7964">created above and cached</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="0" x="999.4375" y="700.9292"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="162" x="995.4375" y="716.062">mem cache is used when</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="77" x="995.4375" y="731.1948">reading files</text><rect fill="#FEFECE" filter="url(#f11viywf3yvuni)" height="47.9375" rx="12.5" ry="12.5" style="stroke: #A80036; stroke-width: 1.5;" width="97" x="1200.4375" y="672.46"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="77" x="1210.4375" y="693.5986">compile with</text><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="44" x="1210.4375" y="707.5674">service</text><polygon fill="#FEFECE" filter="url(#f11viywf3yvuni)" points="1079.1875,745.2607,1091.1875,757.2607,1079.1875,769.2607,1067.1875,757.2607,1079.1875,745.2607" style="stroke: #A80036; stroke-width: 1.5;"/><polygon fill="#FBFB77" filter="url(#f11viywf3yvuni)" points="801.6875,804.2607,801.6875,874.792,1008.6875,874.792,1008.6875,814.2607,998.6875,804.2607,801.6875,804.2607" style="stroke: #A80036; stroke-width: 1.0;"/><polygon fill="#FBFB77" points="801.6875,804.2607,801.6875,874.792,1008.6875,874.792,1008.6875,843.5264,1028.6875,839.5264,1008.6875,835.5264,1008.6875,814.2607,998.6875,804.2607,801.6875,804.2607" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="998.6875" x2="998.6875" y1="804.2607" y2="814.2607"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="1008.6875" x2="998.6875" y1="814.2607" y2="814.2607"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="155" x="807.6875" y="821.3276">here is where hoisting of</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="181" x="807.6875" y="836.4604">jest.mock is done, as well as</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="186" x="807.6875" y="851.5933">user-defined transformations</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="101" x="807.6875" y="866.7261">based on config</text><rect fill="#FEFECE" filter="url(#f11viywf3yvuni)" height="47.9375" rx="12.5" ry="12.5" style="stroke: #A80036; stroke-width: 1.5;" width="101" x="1028.6875" y="815.5576"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="73" x="1038.6875" y="836.6963">custom AST</text><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="81" x="1038.6875" y="850.665">transformers</text><rect fill="#FEFECE" filter="url(#f11viywf3yvuni)" height="33.9688" rx="12.5" ry="12.5" style="stroke: #A80036; stroke-width: 1.5;" width="118" x="1020.1875" y="922.5967"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="98" x="1030.1875" y="943.7354">fix source maps</text><rect fill="#FEFECE" filter="url(#f11viywf3yvuni)" height="33.9688" rx="12.5" ry="12.5" style="stroke: #A80036; stroke-width: 1.5;" width="141" x="1008.6875" y="991.5654"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="121" x="1018.6875" y="1012.7041">update mem cache</text><rect fill="#FEFECE" filter="url(#f11viywf3yvuni)" height="33.9688" rx="12.5" ry="12.5" style="stroke: #A80036; stroke-width: 1.5;" width="175" x="991.6875" y="1060.5342"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="155" x="1001.6875" y="1081.6729">update persistent cache</text><polygon fill="#FEFECE" filter="url(#f11viywf3yvuni)" points="824.8125,1100.5029,836.8125,1112.5029,824.8125,1124.5029,812.8125,1112.5029,824.8125,1100.5029" style="stroke: #A80036; stroke-width: 1.5;"/><line style="stroke: #000000; stroke-width: 2.0;" x1="1306.4375" x2="1306.4375" y1="12.7451" y2="1692.9639"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="354.9375" x2="354.9375" y1="53.6982" y2="88.6982"/><polygon fill="#A80036" points="350.9375,78.6982,354.9375,88.6982,358.9375,78.6982,354.9375,82.6982" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="354.9375" x2="354.9375" y1="181.667" y2="206.0693"/><polygon fill="#A80036" points="350.9375,196.0693,354.9375,206.0693,358.9375,196.0693,354.9375,200.0693" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="413.9375" x2="425.9375" y1="169.667" y2="169.667"/><polygon fill="#A80036" points="421.9375,225.8584,425.9375,235.8584,429.9375,225.8584,425.9375,229.8584" style="stroke: #A80036; stroke-width: 1.5;"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="425.9375" x2="425.9375" y1="169.667" y2="302.0498"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="425.9375" x2="366.9375" y1="302.0498" y2="302.0498"/><polygon fill="#A80036" points="376.9375,298.0498,366.9375,302.0498,376.9375,306.0498,372.9375,302.0498" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="354.9375" x2="354.9375" y1="240.0381" y2="290.0498"/><polygon fill="#A80036" points="350.9375,280.0498,354.9375,290.0498,358.9375,280.0498,354.9375,284.0498" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="354.9375" x2="354.9375" y1="122.667" y2="157.667"/><polygon fill="#A80036" points="350.9375,147.667,354.9375,157.667,358.9375,147.667,354.9375,151.667" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="273.9375" x2="67.5" y1="361.0498" y2="361.0498"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="67.5" x2="67.5" y1="361.0498" y2="396.1982"/><polygon fill="#A80036" points="63.5,386.1982,67.5,396.1982,71.5,386.1982,67.5,390.1982" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="67.5" x2="67.5" y1="430.167" y2="1146.5029"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="67.5" x2="342.9375" y1="1146.5029" y2="1146.5029"/><polygon fill="#A80036" points="332.9375,1142.5029,342.9375,1146.5029,332.9375,1150.5029,336.9375,1146.5029" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="354.9375" x2="354.9375" y1="314.0498" y2="349.0498"/><polygon fill="#A80036" points="350.9375,339.0498,354.9375,349.0498,358.9375,339.0498,354.9375,343.0498" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="354.9375" x2="354.9375" y1="1217.5029" y2="1245.0537"/><polygon fill="#A80036" points="350.9375,1235.0537,354.9375,1245.0537,358.9375,1235.0537,354.9375,1239.0537" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="418.9375" x2="457.4375" y1="1205.5029" y2="1205.5029"/><polygon fill="#A80036" points="453.4375,1264.8428,457.4375,1274.8428,461.4375,1264.8428,457.4375,1268.8428" style="stroke: #A80036; stroke-width: 1.5;"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="457.4375" x2="457.4375" y1="1205.5029" y2="1344.1826"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="457.4375" x2="366.9375" y1="1344.1826" y2="1344.1826"/><polygon fill="#A80036" points="376.9375,1340.1826,366.9375,1344.1826,376.9375,1348.1826,372.9375,1344.1826" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="354.9375" x2="354.9375" y1="1279.0225" y2="1332.1826"/><polygon fill="#A80036" points="350.9375,1322.1826,354.9375,1332.1826,358.9375,1322.1826,354.9375,1326.1826" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="354.9375" x2="354.9375" y1="1158.5029" y2="1193.5029"/><polygon fill="#A80036" points="350.9375,1183.5029,354.9375,1193.5029,358.9375,1183.5029,354.9375,1187.5029" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="354.9375" x2="354.9375" y1="1415.1826" y2="1450.2998"/><polygon fill="#A80036" points="350.9375,1440.2998,354.9375,1450.2998,358.9375,1440.2998,354.9375,1444.2998" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="434.4375" x2="446.4375" y1="1403.1826" y2="1403.1826"/><polygon fill="#A80036" points="442.4375,1470.0889,446.4375,1480.0889,450.4375,1470.0889,446.4375,1474.0889" style="stroke: #A80036; stroke-width: 1.5;"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="446.4375" x2="446.4375" y1="1403.1826" y2="1556.9951"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="446.4375" x2="366.9375" y1="1556.9951" y2="1556.9951"/><polygon fill="#A80036" points="376.9375,1552.9951,366.9375,1556.9951,376.9375,1560.9951,372.9375,1556.9951" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="354.9375" x2="354.9375" y1="1484.2686" y2="1544.9951"/><polygon fill="#A80036" points="350.9375,1534.9951,354.9375,1544.9951,358.9375,1534.9951,354.9375,1538.9951" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="354.9375" x2="354.9375" y1="1356.1826" y2="1391.1826"/><polygon fill="#A80036" points="350.9375,1381.1826,354.9375,1391.1826,358.9375,1381.1826,354.9375,1385.1826" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="354.9375" x2="354.9375" y1="1568.9951" y2="1603.9951"/><polygon fill="#A80036" points="350.9375,1593.9951,354.9375,1603.9951,358.9375,1593.9951,354.9375,1597.9951" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="354.9375" x2="354.9375" y1="1637.9639" y2="1672.9639"/><polygon fill="#A80036" points="350.9375,1662.9639,354.9375,1672.9639,358.9375,1662.9639,354.9375,1666.9639" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="824.8125" x2="824.8125" y1="417.0498" y2="441.4521"/><polygon fill="#A80036" points="820.8125,431.4521,824.8125,441.4521,828.8125,431.4521,824.8125,435.4521" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="888.8125" x2="900.8125" y1="405.0498" y2="405.0498"/><polygon fill="#A80036" points="896.8125,455.4209,900.8125,465.4209,904.8125,455.4209,900.8125,459.4209" style="stroke: #A80036; stroke-width: 1.5;"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="900.8125" x2="900.8125" y1="405.0498" y2="525.792"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="900.8125" x2="836.8125" y1="525.792" y2="525.792"/><polygon fill="#A80036" points="846.8125,521.792,836.8125,525.792,846.8125,529.792,842.8125,525.792" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="824.8125" x2="824.8125" y1="489.3896" y2="513.792"/><polygon fill="#A80036" points="820.8125,503.792,824.8125,513.792,828.8125,503.792,824.8125,507.792" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="1015.1875" x2="909.4375" y1="631.5967" y2="631.5967"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="909.4375" x2="909.4375" y1="631.5967" y2="653.5967"/><polygon fill="#A80036" points="905.4375,643.5967,909.4375,653.5967,913.4375,643.5967,909.4375,647.5967" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="1143.1875" x2="1248.9375" y1="631.5967" y2="631.5967"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="1248.9375" x2="1248.9375" y1="631.5967" y2="672.46"/><polygon fill="#A80036" points="1244.9375,662.46,1248.9375,672.46,1252.9375,662.46,1248.9375,666.46" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="909.4375" x2="909.4375" y1="701.5342" y2="757.2607"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="909.4375" x2="1067.1875" y1="757.2607" y2="757.2607"/><polygon fill="#A80036" points="1057.1875,753.2607,1067.1875,757.2607,1057.1875,761.2607,1061.1875,757.2607" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="1248.9375" x2="1248.9375" y1="720.3975" y2="757.2607"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="1248.9375" x2="1091.1875" y1="757.2607" y2="757.2607"/><polygon fill="#A80036" points="1101.1875,753.2607,1091.1875,757.2607,1101.1875,761.2607,1097.1875,757.2607" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="1079.1875" x2="1079.1875" y1="769.2607" y2="815.5576"/><polygon fill="#A80036" points="1075.1875,805.5576,1079.1875,815.5576,1083.1875,805.5576,1079.1875,809.5576" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="1079.1875" x2="1079.1875" y1="863.4951" y2="922.5967"/><polygon fill="#A80036" points="1075.1875,912.5967,1079.1875,922.5967,1083.1875,912.5967,1079.1875,916.5967" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="94" x="1083.1875" y="896.854">compiled source</text><line style="stroke: #A80036; stroke-width: 1.5;" x1="1079.1875" x2="1079.1875" y1="956.5654" y2="991.5654"/><polygon fill="#A80036" points="1075.1875,981.5654,1079.1875,991.5654,1083.1875,981.5654,1079.1875,985.5654" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="1079.1875" x2="1079.1875" y1="1025.5342" y2="1060.5342"/><polygon fill="#A80036" points="1075.1875,1050.5342,1079.1875,1060.5342,1083.1875,1050.5342,1079.1875,1054.5342" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="755.3125" x2="570.4375" y1="597.5967" y2="597.5967"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="570.4375" x2="570.4375" y1="597.5967" y2="619.5967"/><polygon fill="#A80036" points="566.4375,609.5967,570.4375,619.5967,574.4375,609.5967,570.4375,613.5967" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="894.3125" x2="1079.1875" y1="597.5967" y2="597.5967"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="1079.1875" x2="1079.1875" y1="597.5967" y2="619.5967"/><polygon fill="#A80036" points="1075.1875,609.5967,1079.1875,619.5967,1083.1875,609.5967,1079.1875,613.5967" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="570.4375" x2="570.4375" y1="667.5342" y2="1112.5029"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="570.4375" x2="812.8125" y1="1112.5029" y2="1112.5029"/><polygon fill="#A80036" points="802.8125,1108.5029,812.8125,1112.5029,802.8125,1116.5029,806.8125,1112.5029" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="1079.1875" x2="1079.1875" y1="1094.5029" y2="1112.5029"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="1079.1875" x2="836.8125" y1="1112.5029" y2="1112.5029"/><polygon fill="#A80036" points="846.8125,1108.5029,836.8125,1112.5029,846.8125,1116.5029,842.8125,1112.5029" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="824.8125" x2="824.8125" y1="537.792" y2="585.5967"/><polygon fill="#A80036" points="820.8125,575.5967,824.8125,585.5967,828.8125,575.5967,824.8125,579.5967" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="39" x="828.8125" y="565.5024">source</text><line style="stroke: #A80036; stroke-width: 1.5;" x1="435.9375" x2="824.8125" y1="361.0498" y2="361.0498"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="824.8125" x2="824.8125" y1="361.0498" y2="393.0498"/><polygon fill="#A80036" points="820.8125,383.0498,824.8125,393.0498,828.8125,383.0498,824.8125,387.0498" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="824.8125" x2="824.8125" y1="1124.5029" y2="1146.5029"/><line style="stroke: #A80036; stroke-width: 1.5;" x1="824.8125" x2="366.9375" y1="1146.5029" y2="1146.5029"/><polygon fill="#A80036" points="376.9375,1142.5029,366.9375,1146.5029,376.9375,1150.5029,372.9375,1146.5029" style="stroke: #A80036; stroke-width: 1.0;"/><!--
@startuml


|processor|
start

:tsJest.process(source);

if (should stringify?) then (yes)
  :json stringify;
  -> update
  source;

else (no)
endif

if (filename ends with .d.ts) then (yes)
  :wipe source;
  note right
    no need to compile
    definition files
  end note

else (no)

  |#Thistle|compiler (cached)|
  if (isolated modules?) then (yes)
  else (no)
    :create and cache
    ts lang service;
  endif

  -> source;

  if (in persistent cache?) then (yes)
    :update mem cache
    from persistent cache;

  else (no)
    if (isolated modules?) then (yes)
      :compile with
      transpileModule;
      note left
        files will be compiled
        as isolated modules
      end note

    else (no)
      :compile with
      service;
      note left
        make use of the service
        created above and cached

        mem cache is used when
        reading files
      end note

    endif

    :custom AST
    transformers;
    note left
      here is where hoisting of
      jest.mock is done, as well as
      user-defined transformations
      based on config
    end note

    -> compiled source;

    :fix source maps;
    :update mem cache;
    :update persistent cache;

  endif
  |processor|

  -> update
  source;

endif

if (should use babel?) then (yes)
  :babelJest.process(source);
  note left
    calls babel-jest
    processor
  end note
  -> update
  source;

else (no)
endif

if (has afterProcess hook?) then (yes)
  :call afterProcess hook;
  -> update
  source;
  note left
    if the hook returns
    something it'll be
    used as new source
  end note

endif

:transformed source;

end


@enduml

PlantUML version 1.2017.15(Mon Jul 03 16:45:34 UTC 2017)
(GPL source distribution)
Java Runtime: OpenJDK Runtime Environment
JVM: OpenJDK 64-Bit Server VM
Java Version: 1.8.0_252-b09
Operating System: Linux
OS Version: 5.3.0-1031-azure
Default Encoding: UTF-8
Language: en
Country: null
--></g></svg>