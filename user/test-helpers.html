<!DOCTYPE html>
<html lang="en"><head>
 <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1"><!-- Begin Jekyll SEO tag v2.6.1 -->
<title>Test helpers | ts-jest</title>
<meta name="generator" content="Jekyll v3.8.5" />
<meta property="og:title" content="Test helpers" />
<meta property="og:locale" content="en_US" />
<meta name="description" content="ts-jest is a TypeScript preprocessor with source map support for Jest that lets you use Jest to test projects written in TypeScript." />
<meta property="og:description" content="ts-jest is a TypeScript preprocessor with source map support for Jest that lets you use Jest to test projects written in TypeScript." />
<meta property="og:site_name" content="ts-jest" />
<script type="application/ld+json">
{"@type":"WebPage","url":"/ts-jest/user/test-helpers.html","headline":"Test helpers","description":"ts-jest is a TypeScript preprocessor with source map support for Jest that lets you use Jest to test projects written in TypeScript.","@context":"https://schema.org"}</script>
<!-- End Jekyll SEO tag -->
<link rel="stylesheet" href="/ts-jest/assets/css/main.css"><link type="application/atom+xml" rel="alternate" href="/ts-jest/feed.xml" title="ts-jest" /><script src="/ts-jest/assets/js/bootstrap/jquery.min.js"></script>
  <script src="/ts-jest/assets/js/bootstrap/bootstrap.bundle.min.js"></script>
</head>
<body><nav class="navbar navbar-expand-lg navbar-light bg-light">
  <div class="container">
    <a class="navbar-brand"
    href="/ts-jest/">
      <!--img width="30" height="30"
           class="d-inline-block align-top"
           src="/ts-jest/assets/img/logo.png"
           alt="ts-jest Logo"-->
      ts-jest
    </a>

    <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarSupportedContent"
      aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>
    <div class="collapse navbar-collapse" id="navbarSupportedContent">
      <ul class="navbar-nav ml-auto">
  
  
    
    
    
      <li class="nav-item dropdown active">
        <a href="/ts-jest/user"
           class="nav-link dropdown-toggle"
           data-toggle="dropdown"
           role="button"
           aria-haspopup="true"
           aria-expanded="false">
           User Documentation
        </a>
        <div class="dropdown-menu">
          
            
              <a href="/ts-jest/user/install"
                 class="dropdown-item">
                 Installation
              </a>
            
          
            
              <a href="/ts-jest/user/config"
                 class="dropdown-item">
                 Configuration
              </a>
            
          
            
              <a href="/ts-jest/user/test-helpers"
                 class="dropdown-item">
                 Test helpers
              </a>
            
          
            
              <a href="/ts-jest/user/react-native"
                 class="dropdown-item">
                 React Native
              </a>
            
          
            
              <a href="/ts-jest/user/babel7-or-ts"
                 class="dropdown-item">
                 Babel7 or TypeScript
              </a>
            
          
        </div>
      </li>
    
  
    
    
    
      <li class="nav-item dropdown ">
        <a href="/ts-jest/tech"
           class="nav-link dropdown-toggle"
           data-toggle="dropdown"
           role="button"
           aria-haspopup="true"
           aria-expanded="false">
           Contributor Reference
        </a>
        <div class="dropdown-menu">
          
            
              <a href="/ts-jest/tech/process"
                 class="dropdown-item">
                 Processing
              </a>
            
          
            
              <a href="/ts-jest/tech/e2e"
                 class="dropdown-item">
                 E2E Testing
              </a>
            
          
        </div>
      </li>
    
  
  <li class="nav-item">
    <a class="nav-link inverse"
       href="https://github.com/kulshekhar/ts-jest">Fork me <span class="fab fa-github"></span></a>
  </li>
</ul>

    </div>
  </div>
</nav>
<div class="py-5">
      <div class="container page-content">
          <article>

  <header>
    <h1>Test helpers</h1>
  </header>

  <section>
    <p><code class="language-plaintext highlighter-rouge">ts-jest</code> provides some test utilities to be used in your test, related to TypeScript.</p>

<h2 id="mocked"><code class="language-plaintext highlighter-rouge">mocked()</code></h2>

<p>The <code class="language-plaintext highlighter-rouge">mocked</code> test helper provides typings on your mocked modules and even their deep methods, based on the typing of its source. It make use of the latest TypeScript features so you even have argument types completion in the IDE (as opposed to <code class="language-plaintext highlighter-rouge">jest.MockInstance</code>).</p>

<p><strong>Note:</strong> while it needs to be a function so that input type is changed, the helper itself does nothing else than returning the given input value.</p>

<h3 id="example">Example</h3>

<div class="language-ts highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">// foo.ts</span>
<span class="k">export</span> <span class="kd">const</span> <span class="nx">foo</span> <span class="o">=</span> <span class="p">{</span>
  <span class="na">a</span> <span class="p">:</span> <span class="p">{</span>
    <span class="na">b</span><span class="p">:</span> <span class="p">{</span>
      <span class="na">c</span><span class="p">:</span> <span class="p">{</span>
        <span class="na">hello</span><span class="p">:</span> <span class="p">(</span><span class="na">name</span><span class="p">:</span> <span class="nx">string</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="s2">`Hello, </span><span class="p">${</span><span class="nx">name</span><span class="p">}</span><span class="s2">`</span><span class="p">,</span>
      <span class="p">},</span>
    <span class="p">},</span>
  <span class="p">},</span>
  <span class="na">name</span><span class="p">:</span> <span class="p">()</span> <span class="o">=&gt;</span> <span class="dl">'</span><span class="s1">foo</span><span class="dl">'</span><span class="p">,</span>
<span class="p">}</span>
</code></pre></div></div>

<div class="language-ts highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">// foo.spec.ts</span>
<span class="k">import</span> <span class="p">{</span> <span class="nx">mocked</span> <span class="p">}</span> <span class="k">from</span> <span class="dl">'</span><span class="s1">ts-jest/utils</span><span class="dl">'</span>
<span class="k">import</span> <span class="p">{</span> <span class="nx">foo</span> <span class="p">}</span> <span class="k">from</span> <span class="dl">'</span><span class="s1">./foo</span><span class="dl">'</span>
<span class="nx">jest</span><span class="p">.</span><span class="nx">mock</span><span class="p">(</span><span class="dl">'</span><span class="s1">./foo</span><span class="dl">'</span><span class="p">)</span>

<span class="c1">// here the whole foo var is mocked deeply</span>
<span class="kd">const</span> <span class="nx">mockedFoo</span> <span class="o">=</span> <span class="nx">mocked</span><span class="p">(</span><span class="nx">foo</span><span class="p">,</span> <span class="kc">true</span><span class="p">)</span>

<span class="nx">test</span><span class="p">(</span><span class="dl">'</span><span class="s1">deep</span><span class="dl">'</span><span class="p">,</span> <span class="p">()</span> <span class="o">=&gt;</span> <span class="p">{</span>
  <span class="c1">// there will be no TS error here, and you'll have completion in modern IDEs</span>
  <span class="nx">mockedFoo</span><span class="p">.</span><span class="nx">a</span><span class="p">.</span><span class="nx">b</span><span class="p">.</span><span class="nx">c</span><span class="p">.</span><span class="nx">hello</span><span class="p">(</span><span class="dl">'</span><span class="s1">me</span><span class="dl">'</span><span class="p">)</span>
  <span class="c1">// same here</span>
  <span class="nx">expect</span><span class="p">(</span><span class="nx">mockedFoo</span><span class="p">.</span><span class="nx">a</span><span class="p">.</span><span class="nx">b</span><span class="p">.</span><span class="nx">c</span><span class="p">.</span><span class="nx">hello</span><span class="p">.</span><span class="nx">mock</span><span class="p">.</span><span class="nx">calls</span><span class="p">).</span><span class="nx">toHaveLength</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>
<span class="p">})</span>

<span class="nx">test</span><span class="p">(</span><span class="dl">'</span><span class="s1">direct</span><span class="dl">'</span><span class="p">,</span> <span class="p">()</span> <span class="o">=&gt;</span> <span class="p">{</span>
  <span class="nx">foo</span><span class="p">.</span><span class="nx">name</span><span class="p">()</span>
  <span class="c1">// here only foo.name is mocked (or its methods if it's an object)</span>
  <span class="nx">expect</span><span class="p">(</span><span class="nx">mocked</span><span class="p">(</span><span class="nx">foo</span><span class="p">.</span><span class="nx">name</span><span class="p">).</span><span class="nx">mock</span><span class="p">.</span><span class="nx">calls</span><span class="p">).</span><span class="nx">toHaveLength</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>
<span class="p">})</span>

</code></pre></div></div>

  </section>

</article>

      </div>
    </div><div class="py-1 bg-light">
  <div class="container">
    <div class="row">
      <div class="col-sm text-right">
        <a href="https://github.com/kulshekhar/ts-jest/tree/master/docs/user/test-helpers.md">
          edit this page <i class="far fa-edit"></i>
        </a>
      </div>
    </div>
  </div>
</div>

<!--div class="py-5 border-top">
  <div class="container">

    <p class="h5 mb-3">ts-jest</p>

    <div class="row">

      <div class="col-sm">
        <ul class="list-unstyled">
          <li>ts-jest</li></ul>
      </div>


      <div class="col-sm text-right">
        <p>`ts-jest` is a TypeScript preprocessor with source map support for Jest that lets you use Jest to test projects written in TypeScript.</p>
      </div>

    </div>

  </div>
</div-->
<script src="/ts-jest/assets/js/bootstrap-additions.js"></script>
<script src="/ts-jest/assets/js/anchors.js"></script>
</body>

</html>
